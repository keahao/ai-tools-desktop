<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AI Tools Hub</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --primary: #6366f1;
      --secondary: #8b5cf6;
      --bg-dark: #0f172a;
      --bg-card: rgba(30, 41, 59, 0.8);
      --text: #f1f5f9;
      --text-muted: #94a3b8;
      --border: rgba(148, 163, 184, 0.1);
      --glow: rgba(99, 102, 241, 0.5);
    }
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { font-family: 'Inter', -apple-system, sans-serif; background: var(--bg-dark); min-height: 100vh; color: var(--text); overflow-x: hidden; }
    .bg-gradient { position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: radial-gradient(ellipse at top left, rgba(99, 102, 241, 0.15), transparent 50%), radial-gradient(ellipse at bottom right, rgba(139, 92, 246, 0.15), transparent 50%); z-index: -1; }
    .header { padding: 40px 20px 20px; text-align: center; }
    .logo { width: 48px; height: 48px; background: linear-gradient(135deg, var(--primary), var(--secondary)); border-radius: 12px; display: inline-flex; align-items: center; justify-content: center; font-size: 24px; margin-bottom: 12px; box-shadow: 0 8px 32px var(--glow); }
    h1 { font-size: 32px; font-weight: 700; background: linear-gradient(135deg, #fff 0%, #94a3b8 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; letter-spacing: -0.5px; }
    .subtitle { color: var(--text-muted); font-size: 14px; font-weight: 400; letter-spacing: 0.5px; }
    .settings-btn { position: fixed; top: 20px; right: 20px; width: 44px; height: 44px; background: rgba(99, 102, 241, 0.1); border: 1px solid rgba(99, 102, 241, 0.3); border-radius: 12px; display: flex; align-items: center; justify-content: center; cursor: pointer; color: var(--primary); font-size: 20px; transition: all 0.2s; }
    .settings-btn:hover { background: rgba(99, 102, 241, 0.2); }
    .container { max-width: 1200px; margin: 0 auto; padding: 20px; }
    .tools-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; margin-bottom: 30px; }
    .tool-card { background: var(--bg-card); backdrop-filter: blur(20px); border: 1px solid var(--border); border-radius: 20px; padding: 24px; cursor: pointer; transition: all 0.3s; position: relative; overflow: hidden; }
    .tool-card::before { content: ''; position: absolute; top: 0; left: 0; right: 0; height: 1px; background: linear-gradient(90deg, transparent, rgba(255,255,255,0.1), transparent); }
    .tool-card:hover { transform: translateY(-8px); border-color: var(--primary); box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3), 0 0 40px var(--glow); }
    .tool-icon { width: 56px; height: 56px; border-radius: 16px; display: flex; align-items: center; justify-content: center; font-size: 28px; margin-bottom: 16px; background: linear-gradient(135deg, rgba(99, 102, 241, 0.2), rgba(139, 92, 246, 0.2)); border: 1px solid rgba(99, 102, 241, 0.3); }
    .tool-name { font-size: 18px; font-weight: 600; margin-bottom: 8px; }
    .tool-desc { font-size: 13px; color: var(--text-muted); line-height: 1.5; }
    .workspace { display: none; animation: fadeIn 0.3s ease; }
    .workspace.show { display: block; }
    @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    .workspace-card { background: var(--bg-card); backdrop-filter: blur(20px); border: 1px solid var(--border); border-radius: 24px; padding: 32px; }
    .back-btn { display: inline-flex; align-items: center; gap: 8px; background: rgba(99, 102, 241, 0.1); border: 1px solid rgba(99, 102, 241, 0.3); color: var(--primary); padding: 10px 20px; border-radius: 12px; cursor: pointer; font-size: 14px; font-weight: 500; transition: all 0.2s; margin-bottom: 24px; }
    .back-btn:hover { background: rgba(99, 102, 241, 0.2); }
    .workspace-header { display: flex; align-items: center; gap: 16px; margin-bottom: 24px; }
    .workspace-header .tool-icon { margin-bottom: 0; }
    .workspace-header h2 { font-size: 24px; font-weight: 600; }
    textarea { width: 100%; height: 140px; padding: 20px; background: rgba(15, 23, 42, 0.6); border: 1px solid var(--border); border-radius: 16px; color: var(--text); font-size: 15px; font-family: inherit; resize: none; transition: all 0.2s; }
    textarea:focus { outline: none; border-color: var(--primary); box-shadow: 0 0 0 4px rgba(99, 102, 241, 0.1); }
    textarea::placeholder { color: var(--text-muted); }
    .btn-primary { display: inline-flex; align-items: center; gap: 10px; background: linear-gradient(135deg, var(--primary), var(--secondary)); color: white; border: none; padding: 14px 32px; border-radius: 14px; cursor: pointer; font-size: 15px; font-weight: 600; margin-top: 20px; transition: all 0.3s; box-shadow: 0 4px 20px var(--glow); }
    .btn-primary:hover { transform: translateY(-2px); box-shadow: 0 8px 30px var(--glow); }
    .btn-primary:disabled { opacity: 0.6; cursor: not-allowed; transform: none; }
    .output { margin-top: 24px; padding: 24px; background: rgba(15, 23, 42, 0.6); border: 1px solid var(--border); border-radius: 16px; white-space: pre-wrap; font-size: 14px; line-height: 1.8; }
    .alert { padding: 16px; background: rgba(239, 68, 68, 0.1); border: 1px solid rgba(239, 68, 68, 0.3); border-radius: 12px; color: #fca5a5; margin-bottom: 20px; }
    .alert a { color: #fca5a5; text-decoration: underline; }
    @media (max-width: 900px) { .tools-grid { grid-template-columns: repeat(2, 1fr); } }
    @media (max-width: 600px) { .tools-grid { grid-template-columns: 1fr; } }
  </style>
</head>
<body>
  <div class="bg-gradient"></div>
  <a href="settings.html" class="settings-btn" title="è®¾ç½®">âš™ï¸</a>
  
  <div class="header">
    <div class="logo">âš¡</div>
    <h1>AI Tools Hub</h1>
    <p class="subtitle">9æ¬¾ä¸“ä¸šAIå·¥å…· Â· ä¸€ç«™å¼æ™ºèƒ½è§£å†³æ–¹æ¡ˆ</p>
  </div>

  <div class="container">
    <div id="apiKeyAlert" class="alert" style="display:none;">
      âš ï¸ è¯·å…ˆé…ç½® API Keyã€‚<a href="settings.html">å‰å¾€è®¾ç½®</a>
    </div>
    
    <div class="tools-grid" id="toolsGrid"></div>

    <div class="workspace" id="workspace">
      <div class="workspace-card">
        <button class="back-btn" onclick="showTools()">â† è¿”å›</button>
        <div class="workspace-header">
          <div class="tool-icon" id="workspaceIcon"></div>
          <h2 id="workspaceTitle"></h2>
        </div>
        <textarea id="input" placeholder="æè¿°æ‚¨çš„éœ€æ±‚ï¼ŒAI å°†ä¸ºæ‚¨ç”Ÿæˆä¸“ä¸šå†…å®¹..."></textarea>
        <button class="btn-primary" id="generateBtn" onclick="generate()">
          <span>âœ¨</span>
          <span id="btnText">ç”Ÿæˆå†…å®¹</span>
        </button>
        <div class="output" id="output"></div>
      </div>
    </div>
  </div>

  <script>
    const tools = [
      { id: 'report', name: 'æŠ¥å‘Šç”Ÿæˆ', icon: 'ğŸ“Š', desc: 'å¯è¡Œæ€§ç ”ç©¶ Â· å•†ä¸šè®¡åˆ’ Â· å¸‚åœºè°ƒç ”', color: '#6366f1' },
      { id: 'video', name: 'è§†é¢‘è„šæœ¬', icon: 'ğŸ¬', desc: 'YouTube Â· TikTok Â· çŸ­è§†é¢‘è„šæœ¬', color: '#8b5cf6' },
      { id: 'novel', name: 'å°è¯´å†™ä½œ', icon: 'ğŸ“š', desc: 'è§’è‰²å¼€å‘ Â· æƒ…èŠ‚å¤§çº² Â· ç« èŠ‚è‰ç¨¿', color: '#a855f7' },
      { id: 'course', name: 'è¯¾ç¨‹è®¾è®¡', icon: 'ğŸ“', desc: 'åœ¨çº¿è¯¾ç¨‹ Â· åŸ¹è®­å¤§çº² Â· æ•™å­¦è®¾è®¡', color: '#06b6d4' },
      { id: 'language', name: 'è¯­è¨€å­¦ä¹ ', icon: 'ğŸŒ', desc: 'å¯¹è¯ç»ƒä¹  Â· è¯­æ³•è®²è§£ Â· è¯æ±‡è®­ç»ƒ', color: '#14b8a6' },
      { id: 'business', name: 'å•†ä¸šè®¡åˆ’', icon: 'ğŸ¢', desc: 'æŠ•èµ„äººçº§å•†ä¸šè®¡åˆ’ä¹¦', color: '#f59e0b' },
      { id: 'competitor', name: 'ç«å“åˆ†æ', icon: 'ğŸ“ˆ', desc: 'ç«äº‰å¯¹æ‰‹åˆ†æ Â· SWOT Â· ç­–ç•¥', color: '#ef4444' },
      { id: 'sales', name: 'é”€å”®åˆ†æ', icon: 'ğŸ’°', desc: 'è¶‹åŠ¿é¢„æµ‹ Â· æœºä¼šè¯†åˆ« Â· é”€å”®æ´å¯Ÿ', color: '#22c55e' },
      { id: 'user', name: 'ç”¨æˆ·åˆ†æ', icon: 'ğŸ‘¥', desc: 'è¡Œä¸ºæ¨¡å¼ Â· è½¬åŒ–ä¼˜åŒ– Â· ç”¨æˆ·ç”»åƒ', color: '#3b82f6' }
    ];

    let currentTool = null;

    function getConfig() {
      const config = localStorage.getItem('ai-tools-config');
      return config ? JSON.parse(config) : null;
    }

    function checkApiKey() {
      const config = getConfig();
      if (!config || !config.apiKey) {
        document.getElementById('apiKeyAlert').style.display = 'block';
        return false;
      }
      document.getElementById('apiKeyAlert').style.display = 'none';
      return true;
    }

    function renderTools() {
      const grid = document.getElementById('toolsGrid');
      grid.innerHTML = tools.map(t => `
        <div class="tool-card" onclick="selectTool('${t.id}')">
          <div class="tool-icon" style="background: linear-gradient(135deg, ${t.color}22, ${t.color}11); border-color: ${t.color}44;">
            ${t.icon}
          </div>
          <div class="tool-name">${t.name}</div>
          <div class="tool-desc">${t.desc}</div>
        </div>
      `).join('');
    }

    function selectTool(id) {
      if (!checkApiKey()) return;
      
      currentTool = tools.find(t => t.id === id);
      document.getElementById('toolsGrid').style.display = 'none';
      document.getElementById('workspace').classList.add('show');
      document.getElementById('workspaceIcon').innerHTML = currentTool.icon;
      document.getElementById('workspaceIcon').style.background = `linear-gradient(135deg, ${currentTool.color}22, ${currentTool.color}11)`;
      document.getElementById('workspaceIcon').style.borderColor = `${currentTool.color}44`;
      document.getElementById('workspaceTitle').textContent = currentTool.name;
      document.getElementById('input').value = '';
      document.getElementById('output').textContent = '';
    }

    function showTools() {
      document.getElementById('toolsGrid').style.display = 'grid';
      document.getElementById('workspace').classList.remove('show');
      currentTool = null;
    }

    async function generate() {
      const config = getConfig();
      if (!config || !config.apiKey) {
        alert('è¯·å…ˆé…ç½® API Key');
        window.location.href = 'settings.html';
        return;
      }

      const input = document.getElementById('input').value;
      if (!input.trim()) return;

      const btn = document.getElementById('generateBtn');
      const btnText = document.getElementById('btnText');
      const output = document.getElementById('output');
      
      btn.disabled = true;
      btnText.textContent = 'ç”Ÿæˆä¸­...';
      output.textContent = 'âœ¨ AI æ­£åœ¨ä¸ºæ‚¨ç”Ÿæˆä¸“ä¸šå†…å®¹...';

      const prompts = {
        report: 'ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„æŠ¥å‘Šæ’°å†™ä¸“å®¶ã€‚',
        video: 'ä½ æ˜¯ä¸€ä¸ªè§†é¢‘è„šæœ¬åˆ›ä½œä¸“å®¶ã€‚',
        novel: 'ä½ æ˜¯ä¸€ä¸ªå°è¯´åˆ›ä½œåŠ©æ‰‹ã€‚',
        course: 'ä½ æ˜¯ä¸€ä¸ªè¯¾ç¨‹è®¾è®¡ä¸“å®¶ã€‚',
        language: 'ä½ æ˜¯ä¸€ä¸ªè¯­è¨€å­¦ä¹ åŠ©æ‰‹ã€‚',
        business: 'ä½ æ˜¯ä¸€ä¸ªå•†ä¸šè®¡åˆ’ä¸“å®¶ã€‚',
        competitor: 'ä½ æ˜¯ä¸€ä¸ªç«äº‰åˆ†æä¸“å®¶ã€‚',
        sales: 'ä½ æ˜¯ä¸€ä¸ªé”€å”®æ•°æ®åˆ†æä¸“å®¶ã€‚',
        user: 'ä½ æ˜¯ä¸€ä¸ªç”¨æˆ·è¡Œä¸ºåˆ†æä¸“å®¶ã€‚'
      };

      try {
        const res = await fetch('https://openrouter.ai/api/v1/chat/completions', {
          method: 'POST',
          headers: {
            'Authorization': `Bearer ${config.apiKey}`,
            'Content-Type': 'application/json',
            'HTTP-Referer': 'https://github.com/keahao/ai-tools-hub',
            'X-Title': 'AI Tools Hub'
          },
          body: JSON.stringify({
            model: config.model || 'deepseek/deepseek-chat',
            messages: [
              { role: 'system', content: prompts[currentTool.id] || 'ä½ æ˜¯ä¸€ä¸ªAIåŠ©æ‰‹ã€‚' },
              { role: 'user', content: input }
            ]
          })
        });

        const data = await res.json();
        
        if (data.error) {
          output.textContent = 'âŒ é”™è¯¯: ' + (data.error.message || JSON.stringify(data.error));
        } else {
          output.textContent = data.choices?.[0]?.message?.content || 'ç”Ÿæˆå¤±è´¥';
        }
      } catch (e) {
        output.textContent = 'âŒ ç½‘ç»œé”™è¯¯: ' + e.message;
      }

      btn.disabled = false;
      btnText.textContent = 'ç”Ÿæˆå†…å®¹';
    }

    // åˆå§‹åŒ–
    checkApiKey();
    renderTools();
  </script>
</body>
</html>
